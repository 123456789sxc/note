输入函数与缓冲区

有些算法题会同时使用不同的输入函数，为了能让我们能够正确读取，我们需要了解一些输入函数，同时也要对 缓冲区有一些了解。

[C++cin详解及清空输入缓冲区_cin 清除缓冲区_selina8921的博客-CSDN博客](https://blog.csdn.net/selina8921/article/details/79067941)

输入原理：

程序的输入都有一个缓冲区，即输入缓冲区。一次输入过程是这样的，当一次键盘输入结束时会将输入的数据存入输入缓冲区，而cin对象直接从输入缓冲区中取数据。正因为cin对象是直接从缓冲区取数据的，**所以有时候当缓冲区中有残留数据时，cin对象会直接取得这些残留数据而不会请求键盘输入**

一. cin>>

该操作符是**根据后面变量的类型读取数据。**

输入结束条件 ：遇到Enter、Space、Tab键。

对结束符的处理 ：详见下面注意（2）

注意： 

（1）cin>>等价于cin.operator>>()，即调用成员函数operator>>()进行读取数据。 
（2）**当cin>>从缓冲区中读取数据时，若缓冲区中第一个字符是空格、tab或换行这些分隔符时，cin>>会将其忽略并清除，继续读取下一个字符，若缓冲区为空，则继续等待。但是如果读取成功，字符后面的分隔符是残留在缓冲区的，cin>>不做处理。** 
（3）不想略过空白字符，那就使用 noskipws 流控制。比如cin>>noskipws>>input;
根据上面的（2），可以知道在连续使用cin读入的时候是不用自己动手删除缓冲区中的 Enter、Space、Tab键的。单独使用也不用自己动手删。

总结：

它会传递并忽略任何前导白色空格字符（空格、制表符或换行符）。一旦它接触到第一个非空格字符即开始阅读，当它读取到下一个空白字符时，它将停止读取。对读取成功后的分隔符不做处理。

二. getline()

getline()有两种，一种是\<istream>头文件中，另一种是\<string> 头文件中

这里只简单了解，\<string>头文件中的getline()

getline的常见用法：

```cpp
istream& getline (istream&  is, string& str, char delim);
```

- is ：表示一个输入流，例如 cin。
  str ：string类型的引用，用来存储输入流中的流信息。
  delim ：char类型的变量，所设置的截断字符；在不自定义设置的情况下，遇到’\n’，则终止输入

```cpp
string s;
getline(cin,s);   //遇到 '\n'就停止，同时将'\n'从缓冲区中删去，将读入的字符串放到s中
```



我之前遇到这样一个题：

第一行输入的字符串不带有空格，我可以直接用cin获取字符串；

第二行输入的字符串带有空格，我可以用getline(cin,s)来获取字符串；

```cpp
string a,b;
cin >> a;
getline(cin,b);
//代码这样写是不符合题意得，因为使用cin获取了第一行的字符串之后，缓冲区的cin结束符还在。因此再用getline读会导致b是个空串。
```

处理的方法:

```cpp
string a,b;
cin >> a;
getchar();
getline(cin,b);
```

getchar()是stdio.h中的库函数，它的作用是从stdin流中读入一个字符，也就是说，如果stdin有数据的话不用输入它就可以直接读取了，如果没有就一直等待直到缓冲区有字符了。

```cpp
int getchar()   // 不接收参数，返回的是读取到的字符的int不是char
```

